<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS优化</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.715e5726.js" as="script"><link rel="preload" href="/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/assets/js/13.baae11ab.js" as="script"><link rel="prefetch" href="/assets/js/10.038cf204.js"><link rel="prefetch" href="/assets/js/11.9ed3204d.js"><link rel="prefetch" href="/assets/js/12.a4894759.js"><link rel="prefetch" href="/assets/js/14.35267df5.js"><link rel="prefetch" href="/assets/js/15.bca22722.js"><link rel="prefetch" href="/assets/js/3.df158bf2.js"><link rel="prefetch" href="/assets/js/4.d12742be.js"><link rel="prefetch" href="/assets/js/5.216cae74.js"><link rel="prefetch" href="/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/assets/js/7.72666530.js"><link rel="prefetch" href="/assets/js/8.bf085a59.js"><link rel="prefetch" href="/assets/js/9.93fa2361.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/quality/" class="nav-link router-link-active">
  性能优化
</a></div><div class="nav-item"><a href="/pattern/" class="nav-link">
  设计模式
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="/quality/" class="nav-link router-link-active">
  性能优化
</a></div><div class="nav-item"><a href="/pattern/" class="nav-link">
  设计模式
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/quality/图片优化.html" class="sidebar-link">图片优化</a></li><li><a href="/quality/CSS优化.html" class="sidebar-link">CSS优化</a></li><li><a href="/quality/JS优化.html" class="active sidebar-link">JS优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/quality/JS优化.html#js优化的总体原则" class="sidebar-link">JS优化的总体原则</a></li><li class="sidebar-sub-header"><a href="/quality/JS优化.html#提升js的加载性能" class="sidebar-link">提升JS的加载性能</a></li><li class="sidebar-sub-header"><a href="/quality/JS优化.html#js动画优化" class="sidebar-link">JS动画优化</a></li><li class="sidebar-sub-header"><a href="/quality/JS优化.html#现在是思考时刻" class="sidebar-link">现在是思考时刻</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js优化"><a href="#js优化" class="header-anchor">#</a> JS优化</h1> <h2 id="js优化的总体原则"><a href="#js优化的总体原则" class="header-anchor">#</a> JS优化的总体原则</h2> <ul><li>当需要时才进行优化</li> <li>并且在进行优化的同时，要考虑可维护性，特别是在团队合作中</li></ul> <h2 id="提升js的加载性能"><a href="#提升js的加载性能" class="header-anchor">#</a> 提升JS的加载性能</h2> <ul><li><p><strong>将 JavaScript 文件放在 body 标签底部</strong>：将 JavaScript 文件放在页面底部可以保证在 JavaScript 加载和执行之前，页面的 HTML 和 CSS 已经被加载和渲染完毕，从而减少了用户等待时间。</p></li> <li><p><strong>使用 defer 属性</strong>：将 defer 属性添加到 script 标签中可以使 JavaScript 文件在 HTML 文档解析完成后加载，<strong>但在 DOMContentLoaded 事件触发之前不执行</strong>，从而减少了对 DOMContentLoaded 事件的阻塞。</p></li> <li><p><strong>使用 async 属性</strong>：将 async 属性添加到 script 标签中可以使 JavaScript 文件在加载时不会阻塞 HTML 文档的解析和渲染，从而提高页面的加载速度。但需要注意的是，<strong>async 属性指定的脚本不能保证按照顺序执行</strong>，因此在使用 async 属性时要注意脚本之间的依赖关系。</p></li> <li><p><strong>压缩 JavaScript 文件</strong>：使用 JavaScript 压缩工具可以将 JavaScript 文件中的空格、注释等无用字符删除，从而减小文件的体积，提高文件的加载速度。</p></li> <li><p><strong>合并 JavaScript 文件</strong>：将多个 JavaScript 文件合并成一个文件可以减少 HTTP 请求的数量，从而提高页面的加载速度。但需要注意的是，在合并文件时要注意文件之间的依赖关系，确保合并后的文件仍然能够正常运行。</p></li> <li><p><strong>使用浏览器缓存</strong>：使用浏览器缓存可以减少 JavaScript 文件的加载时间，提高页面的加载速度。可以通过设置 expires、Cache-Control 等响应头信息来控制缓存时间。【另外，可以使用 Service Worker 技术，将 JavaScript 文件缓存到本地，即使在离线情况下也能够加载 JavaScript 文件，提高应用的性能和可靠性。】</p></li> <li><p><strong>懒加载 JavaScript</strong>：将 JavaScript 文件划分为多个模块，仅在需要时才加载相关的模块，可以减少不必要的 JavaScript 文件的加载和执行时间，从而提高页面的性能。</p></li> <li><p>尽量使用id选择器</p></li> <li><p>尽量避免使用eval</p></li> <li><p>JS函数尽可能保持简介</p></li> <li><p>使用事件节流函数</p></li> <li><p>使用事件委托</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">面试提问🤔🤔🤔</p> <p>🚩你能说说script标签中defer属性和async属性的区别吗？<br>
🚩你能说说事件委托是什么吗？</p></div> <h2 id="js动画优化"><a href="#js动画优化" class="header-anchor">#</a> JS动画优化</h2> <p>JavaScript 动画是<strong>通过在浏览器的渲染帧之间快速更改元素的 CSS 样式来实现的</strong>，因此优化 JavaScript 动画可以提高网页的性能和用户体验。</p> <ul><li>要避免添加大量的JS动画</li> <li><strong>尽量使用CSS3动画</strong>：CSS3 动画使用 GPU 加速来提高性能，而且不需要使用 JavaScript 来实现动画。相比于 JavaScript 动画，CSS3 动画可以更容易地优化和维护，而且在一些设备上表现更加流畅。</li> <li>尽量使用Canvas动画</li> <li><strong>使用 requestAnimationFrame（RAF）代替 setTimeout 和 setInterval</strong>：使用 RAF 可以在浏览器在下一帧开始渲染之前执行 JavaScript 代码，从而实现更加平滑的动画效果。相较于 setTimeout 和 setInterval，RAF 可以避免一些性能问题和意外的暂停/延迟，并且更加节省电池和 CPU。</li> <li>在使用JS动画时，要最小化重绘和重排</li> <li>减少 DOM 操作：DOM 操作是非常耗时的操作，如果在动画过程中进行过多的 DOM 操作，会影响性能。为了避免这种情况，可以尽量减少 DOM 操作，例如将动画元素缓存起来，避免在每一帧中重新获取元素。</li> <li>避免在动画过程中执行其他 JavaScript 代码：在动画过程中执行其他 JavaScript 代码会影响性能，因此应该尽量避免这种情况。如果需要在动画过程中执行其他操作，可以将这些操作放在 requestAnimationFrame 回调函数中执行。</li></ul> <div class="custom-block tip"><p class="custom-block-title">面试提问🤔🤔🤔</p> <p>🚩你能说说为什么CSS动画比JavaScript动画效率更高吗？<br>
🚩有了CSS动画为什么还要又JavaScript动画呢？</p></div> <h2 id="现在是思考时刻"><a href="#现在是思考时刻" class="header-anchor">#</a> 现在是思考时刻</h2> <details class="custom-block details"><summary>如何在动画中减少对DOM的操作次数？[查看解答]</summary> <p>content</p></details> <details class="custom-block details"><summary>如何解决动画过程中出现的卡顿和掉帧现象？[查看解答]</summary> <p>content</p></details> <details class="custom-block details"><summary>如何优化大量元素的动画效果？[查看解答]</summary> <p>content</p></details></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/quality/CSS优化.html" class="prev">
        CSS优化
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.715e5726.js" defer></script><script src="/assets/js/2.733019b2.js" defer></script><script src="/assets/js/13.baae11ab.js" defer></script>
  </body>
</html>
